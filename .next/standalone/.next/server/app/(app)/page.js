(()=>{var e={};e.id=198,e.ids=[198],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7034:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),r(7934),r(7210),r(5866),r(1506);var s=r(3191),n=r(8716),a=r(7922),o=r.n(a),i=r(5231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d=["",{children:["(app)",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,7934)),"C:\\GIT\\HuronPortal\\app\\(app)\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,7210)),"C:\\GIT\\HuronPortal\\app\\(app)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,1506)),"C:\\GIT\\HuronPortal\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\GIT\\HuronPortal\\app\\(app)\\page.tsx"],u="/(app)/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/(app)/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7424:(e,t,r)=>{Promise.resolve().then(r.bind(r,8302))},7976:()=>{},184:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},9902:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,9404,23))},8302:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(326),n=r(7577),a=r(3158);function o(){let[e,t]=(0,n.useState)([]),[r,o]=(0,n.useState)([]),[i,l]=(0,n.useState)(!0),[d,c]=(0,n.useState)(null),[u,m]=(0,n.useState)("");return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-secondary-900 mb-2",children:"Machines CNC"}),s.jsx("p",{className:"text-secondary-600",children:"Liste de toutes les machines enregistr\xe9es dans le syst\xe8me"})]}),(0,s.jsxs)("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx("svg",{className:"h-5 w-5 text-secondary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("input",{type:"text",placeholder:"Rechercher par num\xe9ro OL, type ou client...",value:u,onChange:e=>m(e.target.value),className:"input-field pl-10 w-full"})]}),d&&s.jsx("div",{className:"bg-error-50 border border-error-200 text-error-700 px-4 py-3 rounded-lg",children:d}),s.jsx(a._,{columns:[{key:"numeroOL",label:"Num\xe9ro OL"},{key:"type",label:"Type de machine"},{key:"clientName",label:"Client"},{key:"createdAt",label:"Date de cr\xe9ation",render:e=>new Date(e.createdAt).toLocaleDateString("fr-CA")}],data:e,keyExtractor:e=>e.id,emptyMessage:"Aucune machine enregistr\xe9e",isLoading:i})]})}},3158:(e,t,r)=>{"use strict";r.d(t,{_:()=>n});var s=r(326);function n({columns:e,data:t,keyExtractor:r,emptyMessage:n="Aucune donn\xe9e disponible",isLoading:a=!1,actions:o}){return a?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):0===t.length?s.jsx("div",{className:"text-center py-12 bg-white rounded-lg border border-secondary-200",children:s.jsx("p",{className:"text-secondary-500 text-lg",children:n})}):s.jsx("div",{className:"bg-white rounded-lg border border-secondary-200 shadow-sm",children:s.jsx("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-secondary-200",children:[s.jsx("thead",{className:"bg-secondary-50 sticky top-0",children:(0,s.jsxs)("tr",{children:[e.map(e=>s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-700 uppercase tracking-wider",children:e.label},e.key)),o&&s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-secondary-700 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-secondary-200",children:t.map(t=>(0,s.jsxs)("tr",{className:"hover:bg-secondary-50 transition-colors",children:[e.map(e=>s.jsx("td",{className:"px-6 py-4 text-sm text-secondary-900",children:e.render?e.render(t):String(t[e.key]??"")},e.key)),o&&s.jsx("td",{className:"px-6 py-4 text-right text-sm font-medium",children:o(t)})]},r(t)))})]})})})}r(7577)},7210:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(9510),n=r(8585),a=r(7371),o=r(1375);async function i({children:e}){let t=await (0,o.Gg)();t||(0,n.redirect)("/login");let r="Admin"===t.role;return"Admin"===t.role||t.role,(0,s.jsxs)("div",{className:"min-h-screen bg-secondary-50",children:[s.jsx("header",{className:"bg-white shadow-sm border-b border-secondary-200",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,s.jsxs)("div",{children:[s.jsx(a.default,{href:"/",className:"text-2xl font-bold text-primary-700 hover:text-primary-800",children:"Huron Portal"}),(0,s.jsxs)("p",{className:"text-sm text-secondary-600",children:["Bienvenue, ",t.username," (",t.role,")"]})]}),s.jsx("form",{action:"/api/auth/logout",method:"POST",children:s.jsx("button",{type:"submit",className:"bg-secondary-200 hover:bg-secondary-300 text-secondary-900 font-medium py-2 px-4 rounded-md transition-colors",children:"D\xe9connexion"})})]}),(0,s.jsxs)("nav",{className:"flex space-x-8 border-t border-secondary-200 pt-4 pb-4",children:[s.jsx(a.default,{href:"/",className:"text-secondary-700 hover:text-primary-600 font-medium transition-colors",children:"Tableau de bord"}),s.jsx(a.default,{href:"/machines",className:"text-secondary-700 hover:text-primary-600 font-medium transition-colors",children:"Machines"}),s.jsx(a.default,{href:"/clients",className:"text-secondary-700 hover:text-primary-600 font-medium transition-colors",children:"Clients"}),r&&s.jsx(a.default,{href:"/users",className:"text-secondary-700 hover:text-primary-600 font-medium transition-colors",children:"Utilisateurs"})]})]})}),s.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e})]})}},7934:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(8570).createProxy)(String.raw`C:\GIT\HuronPortal\app\(app)\page.tsx#default`)},1506:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a,metadata:()=>n});var s=r(9510);r(7272);let n={title:"Huron Portal - Gestion des Machines CNC",description:"Syst\xe8me de gestion des machines CNC pour Huron"};function a({children:e}){return s.jsx("html",{lang:"fr",children:s.jsx("body",{className:"antialiased bg-secondary-50 text-secondary-900",children:e})})}},1375:(e,t,r)=>{"use strict";r.d(t,{Gg:()=>m,Rf:()=>p,Uj:()=>x,ed:()=>d,v6:()=>u});var s=r(6890),n=r(1463),a=r(1615);let o=new TextEncoder().encode(process.env.SESSION_SECRET||"development-secret-key-change-in-production"),i=Number(process.env.SESSION_DURATION)||3600,l="session";async function d(e,t,r){let n=Math.floor(Date.now()/1e3),a=n+i;return await new s.N({userId:e,username:t,role:r,createdAt:n,expiresAt:a}).setProtectedHeader({alg:"HS256"}).setIssuedAt(n).setExpirationTime(a).sign(o)}async function c(e){try{let{payload:t}=await (0,n._)(e,o),r=Math.floor(Date.now()/1e3);if(t.expiresAt&&"number"==typeof t.expiresAt&&t.expiresAt<r)return null;return t}catch(e){return null}}async function u(e){let t=e.cookies.get(l)?.value;return t?c(t):null}async function m(){let e=await (0,a.cookies)(),t=e.get(l)?.value;return t?c(t):null}function x(e){return{name:l,value:e,httpOnly:!0,secure:!0,sameSite:"lax",maxAge:i,path:"/"}}function p(){return{name:l,value:"",httpOnly:!0,secure:!0,sameSite:"lax",maxAge:0,path:"/"}}},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,112,471,15],()=>r(7034));module.exports=s})();