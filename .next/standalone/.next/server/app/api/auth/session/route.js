"use strict";(()=>{var e={};e.id=603,e.ids=[603],e.modules={2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6506:(e,r,s)=>{s.r(r),s.d(r,{originalPathname:()=>h,patchFetch:()=>f,requestAsyncStorage:()=>m,routeModule:()=>p,serverHooks:()=>v,staticGenerationAsyncStorage:()=>x});var t={};s.r(t),s.d(t,{GET:()=>l});var i=s(9303),a=s(8716),n=s(670),u=s(7070),o=s(1375),c=s(9276),d=s(2038);async function l(e){let r=await (0,o.v6)(e);return r?u.NextResponse.json({data:{userId:r.userId,username:r.username,role:r.role}}):(0,c.jl)(d.s.auth.unauthorized,"UNAUTHORIZED",401)}let p=new i.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/auth/session/route",pathname:"/api/auth/session",filename:"route",bundlePath:"app/api/auth/session/route"},resolvedPagePath:"C:\\GIT\\HuronPortal\\app\\api\\auth\\session\\route.ts",nextConfigOutput:"standalone",userland:t}),{requestAsyncStorage:m,staticGenerationAsyncStorage:x,serverHooks:v}=p,h="/api/auth/session/route";function f(){return(0,n.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:x})}},1375:(e,r,s)=>{s.d(r,{Gg:()=>p,Rf:()=>x,Uj:()=>m,ed:()=>c,v6:()=>l});var t=s(6890),i=s(1463),a=s(1615);let n=new TextEncoder().encode(process.env.SESSION_SECRET||"development-secret-key-change-in-production"),u=Number(process.env.SESSION_DURATION)||3600,o="session";async function c(e,r,s){let i=Math.floor(Date.now()/1e3),a=i+u;return await new t.N({userId:e,username:r,role:s,createdAt:i,expiresAt:a}).setProtectedHeader({alg:"HS256"}).setIssuedAt(i).setExpirationTime(a).sign(n)}async function d(e){try{let{payload:r}=await (0,i._)(e,n),s=Math.floor(Date.now()/1e3);if(r.expiresAt&&"number"==typeof r.expiresAt&&r.expiresAt<s)return null;return r}catch(e){return null}}async function l(e){let r=e.cookies.get(o)?.value;return r?d(r):null}async function p(){let e=await (0,a.cookies)(),r=e.get(o)?.value;return r?d(r):null}function m(e){return{name:o,value:e,httpOnly:!0,secure:!0,sameSite:"lax",maxAge:u,path:"/"}}function x(){return{name:o,value:"",httpOnly:!0,secure:!0,sameSite:"lax",maxAge:0,path:"/"}}},9276:(e,r,s)=>{s.d(r,{S3:()=>a,jl:()=>i});var t=s(6263);function i(e,r,s=400,t){return Response.json({error:e,code:r,details:t},{status:s})}function a(e){if(console.error("Error:",e),e instanceof t.jmq)return i("Donn\xe9es invalides","VALIDATION_ERROR",400,e.issues.map(e=>({field:e.path.join("."),message:e.message})));if(e instanceof Error)switch(e.message){case"DUPLICATE_ENTRY":return i("Un enregistrement avec ces informations existe d\xe9j\xe0","DUPLICATE_ENTRY",409);case"NOT_FOUND":return i("Ressource non trouv\xe9e","NOT_FOUND",404);case"CONCURRENT_MODIFICATION":return i("Cet enregistrement a \xe9t\xe9 modifi\xe9 par un autre utilisateur","CONCURRENT_MODIFICATION",412);case"UNAUTHORIZED":return i("Authentification requise","UNAUTHORIZED",401);case"FORBIDDEN":return i("Acc\xe8s interdit","FORBIDDEN",403)}return i("Une erreur est survenue","SERVER_ERROR",500)}},2038:(e,r,s)=>{s.d(r,{s:()=>t});let t={required:"Ce champ est requis",invalid:"Valeur invalide",minLength:e=>`Minimum ${e} caract\xe8res requis`,maxLength:e=>`Maximum ${e} caract\xe8res autoris\xe9s`,email:"Adresse courriel invalide",password:{required:"Le mot de passe est requis",minLength:"Le mot de passe doit contenir au moins 8 caract\xe8res",maxLength:"Le mot de passe ne peut pas d\xe9passer 128 caract\xe8res"},user:{usernameRequired:"Le nom d'utilisateur est requis",usernameMin:"Le nom d'utilisateur doit contenir au moins 3 caract\xe8res",usernameMax:"Le nom d'utilisateur ne peut pas d\xe9passer 50 caract\xe8res",usernameFormat:"Le nom d'utilisateur ne peut contenir que des lettres minuscules, chiffres, points, traits d'union et underscores",nameRequired:"Le nom complet est requis",nameMax:"Le nom ne peut pas d\xe9passer 100 caract\xe8res",emailRequired:"Le courriel est requis",emailInvalid:"Adresse courriel invalide",emailMax:"Le courriel ne peut pas d\xe9passer 100 caract\xe8res",roleRequired:"Le r\xf4le est requis",roleInvalid:"R\xf4le invalide. Choisir: Admin, Contr\xf4leur ou Utilisateur",duplicateUsername:e=>`Le nom d'utilisateur "${e}" est d\xe9j\xe0 utilis\xe9. Veuillez en choisir un autre.`,duplicateEmail:e=>`Le courriel "${e}" est d\xe9j\xe0 utilis\xe9. Veuillez en choisir un autre.`},machine:{numeroOLRequired:"Le num\xe9ro #OL est requis",numeroOLMax:"Le num\xe9ro #OL ne peut pas d\xe9passer 50 caract\xe8res",numeroOLFormat:"Le num\xe9ro #OL ne peut contenir que des lettres majuscules, chiffres et tirets",duplicateOL:e=>`Le num\xe9ro #OL "${e}" existe d\xe9j\xe0`,typeRequired:"Le type de machine est requis",typeMax:"Le type ne peut pas d\xe9passer 200 caract\xe8res",clientRequired:"Le client est requis",clientInvalid:"Client invalide"},client:{companyNameRequired:"Le nom de l'entreprise est requis",companyNameMax:"Le nom de l'entreprise ne peut pas d\xe9passer 200 caract\xe8res",addressRequired:"L'adresse est requise",addressMax:"L'adresse ne peut pas d\xe9passer 300 caract\xe8res",provinceRequired:"La province est requise",provinceInvalid:"Province invalide",postalCodeRequired:"Le code postal est requis",postalCodeFormat:"Format de code postal invalide (A1A 1A1 ou A1A1A1)",hasMatches:e=>`Ce client a ${e} machine(s) associ\xe9e(s). Veuillez d'abord supprimer ou r\xe9assigner les machines.`},auth:{invalidCredentials:"Identifiants invalides",sessionExpired:"Votre session a expir\xe9. Veuillez vous reconnecter.",unauthorized:"Authentification requise",forbidden:"Acc\xe8s interdit",forbiddenRole:e=>`Vous n'avez pas les permissions n\xe9cessaires pour ${e}`},concurrency:{modified:"Cet enregistrement a \xe9t\xe9 modifi\xe9 par un autre utilisateur. Veuillez rafra\xeechir et r\xe9essayer.",machineModified:"Cette machine a \xe9t\xe9 modifi\xe9e par un autre utilisateur. Veuillez rafra\xeechir et r\xe9essayer.",clientModified:"Ce client a \xe9t\xe9 modifi\xe9 par un autre utilisateur. Veuillez rafra\xeechir et r\xe9essayer.",userModified:"Cet utilisateur a \xe9t\xe9 modifi\xe9 par un autre administrateur. Veuillez rafra\xeechir et r\xe9essayer."},deletion:{cannotDeleteSelf:"Vous ne pouvez pas supprimer votre propre compte utilisateur.",cannotDeleteLastAdmin:"Impossible de supprimer le dernier administrateur du syst\xe8me.",confirmDelete:"\xcates-vous s\xfbr de vouloir supprimer cet \xe9l\xe9ment?"},success:{created:e=>`${e} cr\xe9\xe9 avec succ\xe8s`,updated:e=>`${e} modifi\xe9 avec succ\xe8s`,deleted:e=>`${e} supprim\xe9 avec succ\xe8s`,loginSuccess:"Connexion r\xe9ussie",logoutSuccess:"D\xe9connexion r\xe9ussie"},server:{error:"Une erreur est survenue",unavailable:"Le service est temporairement indisponible"}}}};var r=require("../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[276,112,972,263],()=>s(6506));module.exports=t})();