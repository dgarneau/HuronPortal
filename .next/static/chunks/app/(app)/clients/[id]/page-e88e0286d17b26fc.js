(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[496,497],{6087:function(e,r,a){Promise.resolve().then(a.bind(a,5159))},5159:function(e,r,a){"use strict";a.d(r,{ClientForm:function(){return p}});var s=a(7437),n=a(9501),t=a(3590),i=a(9376),o=a(2265),l=a(914),c=a(8068),u=a(4226),d=a(4553);let m=[{value:"QC",label:"Qu\xe9bec"},{value:"ON",label:"Ontario"},{value:"AB",label:"Alberta"},{value:"BC",label:"Colombie-Britannique"},{value:"MB",label:"Manitoba"},{value:"NB",label:"Nouveau-Brunswick"},{value:"NL",label:"Terre-Neuve-et-Labrador"},{value:"NT",label:"Territoires du Nord-Ouest"},{value:"NS",label:"Nouvelle-\xc9cosse"},{value:"NU",label:"Nunavut"},{value:"PE",label:"\xcele-du-Prince-\xc9douard"},{value:"SK",label:"Saskatchewan"},{value:"YT",label:"Yukon"}];function p(e){var r,a,p;let{client:v,mode:x}=e,b=(0,i.useRouter)(),[f,N]=(0,o.useState)(!1),[y,g]=(0,o.useState)(""),{register:h,handleSubmit:L,formState:{errors:Z}}=(0,n.cI)({resolver:(0,t.F)(l.Lf),defaultValues:v?{companyName:v.companyName,address:v.address,province:v.province,postalCode:v.postalCode}:void 0}),_=async e=>{N(!0),g("");try{let r="create"===x?"/api/clients":"/api/clients/".concat(null==v?void 0:v.id),a=await fetch(r,{method:"create"===x?"POST":"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){let e=await a.json();throw Error(e.error||"Une erreur est survenue")}b.push("/clients"),b.refresh()}catch(e){g(e instanceof Error?e.message:"Une erreur est survenue")}finally{N(!1)}};return(0,s.jsxs)("form",{onSubmit:L(_),noValidate:!0,className:"space-y-6 max-w-2xl",children:[y&&(0,s.jsx)(d.B,{children:y}),(0,s.jsx)(c.I,{label:"Nom de l'entreprise",...h("companyName"),error:null===(r=Z.companyName)||void 0===r?void 0:r.message,disabled:f}),(0,s.jsx)(c.I,{label:"Adresse",...h("address"),error:null===(a=Z.address)||void 0===a?void 0:a.message,disabled:f}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"province",className:"block text-sm font-medium text-secondary-700 mb-1",children:"Province"}),(0,s.jsxs)("select",{id:"province",...h("province"),disabled:f,className:"input-field",children:[(0,s.jsx)("option",{value:"",children:"S\xe9lectionnez une province"}),m.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))]}),Z.province&&(0,s.jsx)("p",{className:"mt-1 text-sm text-error-600",children:Z.province.message})]}),(0,s.jsx)(c.I,{label:"Code postal",...h("postalCode"),error:null===(p=Z.postalCode)||void 0===p?void 0:p.message,placeholder:"A1A 1A1",disabled:f}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(u.z,{type:"submit",disabled:f,children:f?"Enregistrement...":"create"===x?"Cr\xe9er le client":"Enregistrer"}),(0,s.jsx)(u.z,{type:"button",variant:"secondary",onClick:()=>b.push("/clients"),disabled:f,children:"Annuler"})]})]})}},4226:function(e,r,a){"use strict";a.d(r,{z:function(){return n}});var s=a(7437);a(2265);let n=e=>{let{variant:r="primary",size:a="md",isLoading:n=!1,children:t,className:i="",disabled:o,...l}=e;return(0,s.jsx)("button",{className:"".concat("font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2"," ").concat({primary:"bg-primary-600 hover:bg-primary-700 text-white focus:ring-primary-500 disabled:bg-primary-300",secondary:"bg-secondary-200 hover:bg-secondary-300 text-secondary-900 focus:ring-secondary-400 disabled:bg-secondary-100",danger:"bg-error-600 hover:bg-error-700 text-white focus:ring-error-500 disabled:bg-error-300"}[r]," ").concat({sm:"py-1 px-3 text-sm",md:"py-2 px-4 text-base",lg:"py-3 px-6 text-lg"}[a]," ").concat(i),disabled:o||n,...l,children:n?"Chargement...":t})}},4553:function(e,r,a){"use strict";a.d(r,{B:function(){return n}});var s=a(7437);a(2265);let n=e=>{let{children:r,className:a=""}=e;return r?(0,s.jsx)("div",{className:"bg-error-50 border border-error-200 text-error-700 px-4 py-3 rounded-md ".concat(a),role:"alert",children:(0,s.jsx)("p",{className:"text-sm",children:r})}):null}},8068:function(e,r,a){"use strict";a.d(r,{I:function(){return n}});var s=a(7437);let n=a(2265).forwardRef((e,r)=>{let{label:a,error:n,className:t="",id:i,...o}=e,l=i||"input-".concat(null==a?void 0:a.replace(/\s+/g,"-").toLowerCase());return(0,s.jsxs)("div",{className:"w-full",children:[a&&(0,s.jsx)("label",{htmlFor:l,className:"block text-sm font-medium text-secondary-700 mb-1",children:a}),(0,s.jsx)("input",{ref:r,id:l,className:"input-field ".concat(n?"border-error-500 focus:ring-error-500":""," ").concat(t),...o}),n&&(0,s.jsx)("p",{className:"mt-1 text-sm text-error-600",role:"alert",children:n})]})});n.displayName="Input"},914:function(e,r,a){"use strict";a.d(r,{Lf:function(){return O},dm:function(){return w},c5:function(){return B},J6:function(){return C},gV:function(){return j}});var s=a(7550);let n="Le mot de passe doit contenir au moins 8 caract\xe8res",t="Le mot de passe ne peut pas d\xe9passer 128 caract\xe8res",i="Le nom d'utilisateur doit contenir au moins 3 caract\xe8res",o="Le nom d'utilisateur ne peut pas d\xe9passer 50 caract\xe8res",l="Le nom d'utilisateur ne peut contenir que des lettres minuscules, chiffres, points, traits d'union et underscores",c="Le nom complet est requis",u="Le nom ne peut pas d\xe9passer 100 caract\xe8res",d="Adresse courriel invalide",m="Le courriel ne peut pas d\xe9passer 100 caract\xe8res",p="R\xf4le invalide. Choisir: Admin, Contr\xf4leur ou Utilisateur",v="Le num\xe9ro #OL est requis",x="Le num\xe9ro #OL ne peut pas d\xe9passer 50 caract\xe8res",b="Le num\xe9ro #OL ne peut contenir que des lettres majuscules, chiffres et tirets",f="Le type de machine est requis",N="Le type ne peut pas d\xe9passer 200 caract\xe8res",y="Client invalide",g="Le nom de l'entreprise est requis",h="Le nom de l'entreprise ne peut pas d\xe9passer 200 caract\xe8res",L="L'adresse est requise",Z="L'adresse ne peut pas d\xe9passer 300 caract\xe8res",_="Province invalide",A="Format de code postal invalide (A1A 1A1 ou A1A1A1)",C=s.Ryn({username:s.Z_8().min(3,i).max(50,o).regex(/^[a-z0-9._-]+$/,l),email:s.Z_8().min(1,"Le courriel est requis").email(d).max(100,m),name:s.Z_8().min(1,c).max(100,u),password:s.Z_8().min(8,n).max(128,t),role:s.KmV(["Admin","Contr\xf4leur","Utilisateur"],{message:p}),isActive:s.O72().default(!0)}),j=s.Ryn({username:s.Z_8().min(3,i).max(50,o).regex(/^[a-z0-9._-]+$/,l).optional(),email:s.Z_8().email(d).max(100,m).optional(),name:s.Z_8().min(1,c).max(100,u).optional(),password:s.Z_8().min(8,n).max(128,t).optional(),role:s.KmV(["Admin","Contr\xf4leur","Utilisateur"],{message:p}).optional(),isActive:s.O72().optional()}),w=s.Ryn({username:s.Z_8().min(1,"Le nom d'utilisateur ou courriel est requis"),password:s.Z_8().min(1,"Le mot de passe est requis")}),B=s.Ryn({numeroOL:s.Z_8().min(1,v).max(50,x).regex(/^[A-Z0-9-]+$/,b),type:s.Z_8().min(1,f).max(200,N),clientId:s.Z_8().uuid(y)});s.Ryn({numeroOL:s.Z_8().min(1,v).max(50,x).regex(/^[A-Z0-9-]+$/,b).optional(),type:s.Z_8().min(1,f).max(200,N).optional(),clientId:s.Z_8().uuid(y).optional()});let O=s.Ryn({companyName:s.Z_8().min(1,g).max(200,h),address:s.Z_8().min(1,L).max(300,Z),province:s.KmV(["QC","ON","AB","BC","MB","NB","NL","NT","NS","NU","PE","SK","YT"],{message:_}),postalCode:s.Z_8().regex(/^[A-Za-z]\d[A-Za-z][ -]?\d[A-Za-z]\d$/,A).transform(e=>e.replace(/[ -]/g,"").toUpperCase())});s.Ryn({companyName:s.Z_8().min(1,g).max(200,h).optional(),address:s.Z_8().min(1,L).max(300,Z).optional(),province:s.KmV(["QC","ON","AB","BC","MB","NB","NL","NT","NS","NU","PE","SK","YT"],{message:_}).optional(),postalCode:s.Z_8().regex(/^[A-Za-z]\d[A-Za-z][ -]?\d[A-Za-z]\d$/,A).transform(e=>e.replace(/[ -]/g,"").toUpperCase()).optional()})}},function(e){e.O(0,[832,971,117,744],function(){return e(e.s=6087)}),_N_E=e.O()}]);