(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[665],{2797:function(e,r,t){Promise.resolve().then(t.bind(t,6795))},6795:function(e,r,t){"use strict";t.d(r,{LoginForm:function(){return d}});var s=t(7437),n=t(2265),a=t(9376),o=t(9501),i=t(3590),u=t(914),l=t(4226),c=t(8068),m=t(4553);let d=()=>{var e,r;let t=(0,a.useRouter)(),[d,p]=(0,n.useState)(""),[x,f]=(0,n.useState)(!1),{register:y,handleSubmit:g,formState:{errors:h}}=(0,o.cI)({resolver:(0,i.F)(u.dm)}),v=async e=>{console.log("Form data:",e),f(!0),p("");try{let r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await r.json();if(!r.ok){p(s.error||"Une erreur est survenue");return}t.push("/"),t.refresh()}catch(e){p("Une erreur est survenue lors de la connexion")}finally{f(!1)}};return(0,s.jsxs)("form",{noValidate:!0,onSubmit:g(v),className:"space-y-4 w-full max-w-md",children:[d&&(0,s.jsx)(m.B,{children:d}),(0,s.jsx)("div",{children:(0,s.jsx)(c.I,{...y("username"),type:"text",label:"Nom d'utilisateur ou courriel",error:null===(e=h.username)||void 0===e?void 0:e.message,autoComplete:"username",placeholder:"utilisateur.nom ou courriel@exemple.com",autoFocus:!0})}),(0,s.jsx)("div",{children:(0,s.jsx)(c.I,{...y("password"),type:"password",label:"Mot de passe",error:null===(r=h.password)||void 0===r?void 0:r.message,autoComplete:"current-password"})}),(0,s.jsx)(l.z,{type:"submit",variant:"primary",className:"w-full",isLoading:x,children:"Se connecter"})]})}},4226:function(e,r,t){"use strict";t.d(r,{z:function(){return n}});var s=t(7437);t(2265);let n=e=>{let{variant:r="primary",size:t="md",isLoading:n=!1,children:a,className:o="",disabled:i,...u}=e;return(0,s.jsx)("button",{className:"".concat("font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2"," ").concat({primary:"bg-primary-600 hover:bg-primary-700 text-white focus:ring-primary-500 disabled:bg-primary-300",secondary:"bg-secondary-200 hover:bg-secondary-300 text-secondary-900 focus:ring-secondary-400 disabled:bg-secondary-100",danger:"bg-error-600 hover:bg-error-700 text-white focus:ring-error-500 disabled:bg-error-300"}[r]," ").concat({sm:"py-1 px-3 text-sm",md:"py-2 px-4 text-base",lg:"py-3 px-6 text-lg"}[t]," ").concat(o),disabled:i||n,...u,children:n?"Chargement...":a})}},4553:function(e,r,t){"use strict";t.d(r,{B:function(){return n}});var s=t(7437);t(2265);let n=e=>{let{children:r,className:t=""}=e;return r?(0,s.jsx)("div",{className:"bg-error-50 border border-error-200 text-error-700 px-4 py-3 rounded-md ".concat(t),role:"alert",children:(0,s.jsx)("p",{className:"text-sm",children:r})}):null}},8068:function(e,r,t){"use strict";t.d(r,{I:function(){return n}});var s=t(7437);let n=t(2265).forwardRef((e,r)=>{let{label:t,error:n,className:a="",id:o,...i}=e,u=o||"input-".concat(null==t?void 0:t.replace(/\s+/g,"-").toLowerCase());return(0,s.jsxs)("div",{className:"w-full",children:[t&&(0,s.jsx)("label",{htmlFor:u,className:"block text-sm font-medium text-secondary-700 mb-1",children:t}),(0,s.jsx)("input",{ref:r,id:u,className:"input-field ".concat(n?"border-error-500 focus:ring-error-500":""," ").concat(a),...i}),n&&(0,s.jsx)("p",{className:"mt-1 text-sm text-error-600",role:"alert",children:n})]})});n.displayName="Input"},914:function(e,r,t){"use strict";t.d(r,{Lf:function(){return S},dm:function(){return j},c5:function(){return O},J6:function(){return C},gV:function(){return w}});var s=t(7550);let n="Le mot de passe doit contenir au moins 8 caract\xe8res",a="Le mot de passe ne peut pas d\xe9passer 128 caract\xe8res",o="Le nom d'utilisateur doit contenir au moins 3 caract\xe8res",i="Le nom d'utilisateur ne peut pas d\xe9passer 50 caract\xe8res",u="Le nom d'utilisateur ne peut contenir que des lettres minuscules, chiffres, points, traits d'union et underscores",l="Le nom complet est requis",c="Le nom ne peut pas d\xe9passer 100 caract\xe8res",m="Adresse courriel invalide",d="Le courriel ne peut pas d\xe9passer 100 caract\xe8res",p="R\xf4le invalide. Choisir: Admin, Contr\xf4leur ou Utilisateur",x="Le num\xe9ro #OL est requis",f="Le num\xe9ro #OL ne peut pas d\xe9passer 50 caract\xe8res",y="Le num\xe9ro #OL ne peut contenir que des lettres majuscules, chiffres et tirets",g="Le type de machine est requis",h="Le type ne peut pas d\xe9passer 200 caract\xe8res",v="Client invalide",L="Le nom de l'entreprise est requis",b="Le nom de l'entreprise ne peut pas d\xe9passer 200 caract\xe8res",Z="L'adresse est requise",_="L'adresse ne peut pas d\xe9passer 300 caract\xe8res",N="Province invalide",A="Format de code postal invalide (A1A 1A1 ou A1A1A1)",C=s.Ryn({username:s.Z_8().min(3,o).max(50,i).regex(/^[a-z0-9._-]+$/,u),email:s.Z_8().min(1,"Le courriel est requis").email(m).max(100,d),name:s.Z_8().min(1,l).max(100,c),password:s.Z_8().min(8,n).max(128,a),role:s.KmV(["Admin","Contr\xf4leur","Utilisateur"],{message:p}),isActive:s.O72().default(!0)}),w=s.Ryn({username:s.Z_8().min(3,o).max(50,i).regex(/^[a-z0-9._-]+$/,u).optional(),email:s.Z_8().email(m).max(100,d).optional(),name:s.Z_8().min(1,l).max(100,c).optional(),password:s.Z_8().min(8,n).max(128,a).optional(),role:s.KmV(["Admin","Contr\xf4leur","Utilisateur"],{message:p}).optional(),isActive:s.O72().optional()}),j=s.Ryn({username:s.Z_8().min(1,"Le nom d'utilisateur ou courriel est requis"),password:s.Z_8().min(1,"Le mot de passe est requis")}),O=s.Ryn({numeroOL:s.Z_8().min(1,x).max(50,f).regex(/^[A-Z0-9-]+$/,y),type:s.Z_8().min(1,g).max(200,h),clientId:s.Z_8().uuid(v)});s.Ryn({numeroOL:s.Z_8().min(1,x).max(50,f).regex(/^[A-Z0-9-]+$/,y).optional(),type:s.Z_8().min(1,g).max(200,h).optional(),clientId:s.Z_8().uuid(v).optional()});let S=s.Ryn({companyName:s.Z_8().min(1,L).max(200,b),address:s.Z_8().min(1,Z).max(300,_),province:s.KmV(["QC","ON","AB","BC","MB","NB","NL","NT","NS","NU","PE","SK","YT"],{message:N}),postalCode:s.Z_8().regex(/^[A-Za-z]\d[A-Za-z][ -]?\d[A-Za-z]\d$/,A).transform(e=>e.replace(/[ -]/g,"").toUpperCase())});s.Ryn({companyName:s.Z_8().min(1,L).max(200,b).optional(),address:s.Z_8().min(1,Z).max(300,_).optional(),province:s.KmV(["QC","ON","AB","BC","MB","NB","NL","NT","NS","NU","PE","SK","YT"],{message:N}).optional(),postalCode:s.Z_8().regex(/^[A-Za-z]\d[A-Za-z][ -]?\d[A-Za-z]\d$/,A).transform(e=>e.replace(/[ -]/g,"").toUpperCase()).optional()})}},function(e){e.O(0,[832,971,117,744],function(){return e(e.s=2797)}),_N_E=e.O()}]);