"use strict";(()=>{var e={};e.id=496,e.ids=[496],e.modules={2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{e.exports=require("assert")},9714:e=>{e.exports=require("constants")},7702:e=>{e.exports=require("events")},2615:e=>{e.exports=require("http")},8791:e=>{e.exports=require("https")},8216:e=>{e.exports=require("net")},9801:e=>{e.exports=require("os")},6162:e=>{e.exports=require("stream")},2452:e=>{e.exports=require("tls")},4175:e=>{e.exports=require("tty")},7360:e=>{e.exports=require("url")},1764:e=>{e.exports=require("util")},6005:e=>{e.exports=require("node:crypto")},8849:e=>{e.exports=require("node:http")},2286:e=>{e.exports=require("node:https")},612:e=>{e.exports=require("node:os")},7742:e=>{e.exports=require("node:process")},4492:e=>{e.exports=require("node:stream")},7261:e=>{e.exports=require("node:util")},5628:e=>{e.exports=require("node:zlib")},1739:(e,t,r)=>{r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>u,routeModule:()=>m,tree:()=>c}),r(7309),r(7210),r(5866),r(1506);var n=r(3191),o=r(8716),i=r(7922),a=r.n(i),s=r(5231),l={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>s[e]);r.d(t,l);let c=["",{children:["(app)",{children:["clients",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,7309)),"C:\\GIT\\HuronPortal\\app\\(app)\\clients\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,7210)),"C:\\GIT\\HuronPortal\\app\\(app)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,1506)),"C:\\GIT\\HuronPortal\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],u=["C:\\GIT\\HuronPortal\\app\\(app)\\clients\\[id]\\page.tsx"],d="/(app)/clients/[id]/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new n.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/(app)/clients/[id]/page",pathname:"/clients/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7309:(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});var n=r(9510),o=r(8585),i=r(3008),a=r(5290);async function s({params:e}){let t=await (0,a.mz)(e.id);return t||(0,o.notFound)(),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-secondary-900",children:"Modifier le client"}),n.jsx("p",{className:"text-secondary-600 mt-1",children:t.companyName})]}),n.jsx("div",{className:"bg-white shadow-md rounded-lg p-6",children:n.jsx(i.O,{client:t,mode:"edit"})})]})}},25:(e,t,r)=>{r.d(t,{IK:()=>u,ZO:()=>c});var n=r(8657);let o=null,i=process.env.COSMOS_DATABASE||"huronportal-db",a=null;async function s(){let e=function(){if(!o){let e=process.env.COSMOS_ENDPOINT,t=process.env.COSMOS_KEY;if(!e||!t)throw console.error("Cosmos DB configuration error:"),console.error("COSMOS_ENDPOINT:",e?"set":"missing"),console.error("COSMOS_KEY:",t?"set":"missing"),Error("COSMOS_ENDPOINT and COSMOS_KEY must be defined in environment variables");console.log("Initializing Cosmos DB client with endpoint:",e),o=new n.Pi({endpoint:e,key:t})}return o}();if(!a){let{database:t}=await e.databases.createIfNotExists({id:i});a=t}return a}let l={users:null,machines:null,clients:null};async function c(e){if(!l[e]){let t=await s(),{container:r}=await t.containers.createIfNotExists({id:e,partitionKey:{paths:[{users:"/username",machines:"/id",clients:"/id"}[e]]}});l[e]=r}return l[e]}function u(e){if(409===e.code)throw Error("DUPLICATE_ENTRY");if(404===e.code)throw Error("NOT_FOUND");if(412===e.code)throw Error("CONCURRENT_MODIFICATION");throw e}},5290:(e,t,r)=>{r.d(t,{EI:()=>d,Nu:()=>c,Qu:()=>l,eI:()=>a,mz:()=>s,pN:()=>u});var n=r(8547),o=r(25);let i="clients";async function a(e){let t=await (0,o.ZO)(i),r={id:(0,n.Z)(),companyName:e.companyName,address:e.address,province:e.province,postalCode:e.postalCode,machineCount:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{resource:a}=await t.items.create(r);return a}async function s(e){let t=await (0,o.ZO)(i);try{let{resource:r}=await t.item(e,e).read();return r||null}catch(e){if(404===e.code)return null;throw e}}async function l(e,t){let r=await (0,o.ZO)(i),{resource:n}=await r.item(e,e).read();if(!n)throw Error("Client not found");let a={...n,...t,updatedAt:new Date().toISOString()},{resource:s}=await r.item(e,e).replace(a);return s}async function c(e){let t=await (0,o.ZO)(i);await t.item(e,e).delete()}async function u(e=50,t){let r=(await (0,o.ZO)(i)).items.query("SELECT * FROM c ORDER BY c.companyName ASC",{maxItemCount:e,continuationToken:t}),{resources:n,continuationToken:a}=await r.fetchNext();return{clients:n,continuationToken:a}}async function d(e,t=50){let r=await (0,o.ZO)(i),n={query:"SELECT * FROM c WHERE CONTAINS(LOWER(c.companyName), @searchTerm) ORDER BY c.companyName ASC",parameters:[{name:"@searchTerm",value:e.toLowerCase()}]},{resources:a}=await r.items.query(n,{maxItemCount:t}).fetchAll();return a}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[276,112,471,418,15,683,107],()=>r(1739));module.exports=n})();