exports.id=107,exports.ids=[107],exports.modules={7976:()=>{},6833:(e,r,a)=>{Promise.resolve().then(a.bind(a,7275))},184:(e,r,a)=>{Promise.resolve().then(a.t.bind(a,2994,23)),Promise.resolve().then(a.t.bind(a,6114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,9671,23)),Promise.resolve().then(a.t.bind(a,1868,23)),Promise.resolve().then(a.t.bind(a,4759,23))},9902:(e,r,a)=>{Promise.resolve().then(a.t.bind(a,9404,23))},7275:(e,r,a)=>{"use strict";a.d(r,{ClientForm:()=>p});var s=a(326),t=a(4723),n=a(4064),i=a(5047),o=a(7577),l=a(7254),d=a(4231),m=a(3679),u=a(4948);let c=[{value:"QC",label:"Qu\xe9bec"},{value:"ON",label:"Ontario"},{value:"AB",label:"Alberta"},{value:"BC",label:"Colombie-Britannique"},{value:"MB",label:"Manitoba"},{value:"NB",label:"Nouveau-Brunswick"},{value:"NL",label:"Terre-Neuve-et-Labrador"},{value:"NT",label:"Territoires du Nord-Ouest"},{value:"NS",label:"Nouvelle-\xc9cosse"},{value:"NU",label:"Nunavut"},{value:"PE",label:"\xcele-du-Prince-\xc9douard"},{value:"SK",label:"Saskatchewan"},{value:"YT",label:"Yukon"}];function p({client:e,mode:r}){let a=(0,i.useRouter)(),[p,x]=(0,o.useState)(!1),[h,v]=(0,o.useState)(""),{register:y,handleSubmit:b,formState:{errors:f}}=(0,t.cI)({resolver:(0,n.F)(l.Lf),defaultValues:e?{companyName:e.companyName,address:e.address,province:e.province,postalCode:e.postalCode}:void 0}),g=async s=>{x(!0),v("");try{let t="create"===r?"/api/clients":`/api/clients/${e?.id}`,n=await fetch(t,{method:"create"===r?"POST":"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok){let e=await n.json();throw Error(e.error||"Une erreur est survenue")}a.push("/clients"),a.refresh()}catch(e){v(e instanceof Error?e.message:"Une erreur est survenue")}finally{x(!1)}};return(0,s.jsxs)("form",{onSubmit:b(g),noValidate:!0,className:"space-y-6 max-w-2xl",children:[h&&s.jsx(u.B,{children:h}),s.jsx(d.I,{label:"Nom de l'entreprise",...y("companyName"),error:f.companyName?.message,disabled:p}),s.jsx(d.I,{label:"Adresse",...y("address"),error:f.address?.message,disabled:p}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"province",className:"block text-sm font-medium text-secondary-700 mb-1",children:"Province"}),(0,s.jsxs)("select",{id:"province",...y("province"),disabled:p,className:"input-field",children:[s.jsx("option",{value:"",children:"S\xe9lectionnez une province"}),c.map(e=>s.jsx("option",{value:e.value,children:e.label},e.value))]}),f.province&&s.jsx("p",{className:"mt-1 text-sm text-error-600",children:f.province.message})]}),s.jsx(d.I,{label:"Code postal",...y("postalCode"),error:f.postalCode?.message,placeholder:"A1A 1A1",disabled:p}),(0,s.jsxs)("div",{className:"flex gap-4",children:[s.jsx(m.z,{type:"submit",disabled:p,children:p?"Enregistrement...":"create"===r?"Cr\xe9er le client":"Enregistrer"}),s.jsx(m.z,{type:"button",variant:"secondary",onClick:()=>a.push("/clients"),disabled:p,children:"Annuler"})]})]})}},3679:(e,r,a)=>{"use strict";a.d(r,{z:()=>t});var s=a(326);a(7577);let t=({variant:e="primary",size:r="md",isLoading:a=!1,children:t,className:n="",disabled:i,...o})=>s.jsx("button",{className:`font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 ${{primary:"bg-primary-600 hover:bg-primary-700 text-white focus:ring-primary-500 disabled:bg-primary-300",secondary:"bg-secondary-200 hover:bg-secondary-300 text-secondary-900 focus:ring-secondary-400 disabled:bg-secondary-100",danger:"bg-error-600 hover:bg-error-700 text-white focus:ring-error-500 disabled:bg-error-300"}[e]} ${{sm:"py-1 px-3 text-sm",md:"py-2 px-4 text-base",lg:"py-3 px-6 text-lg"}[r]} ${n}`,disabled:i||a,...o,children:a?"Chargement...":t})},4948:(e,r,a)=>{"use strict";a.d(r,{B:()=>t});var s=a(326);a(7577);let t=({children:e,className:r=""})=>e?s.jsx("div",{className:`bg-error-50 border border-error-200 text-error-700 px-4 py-3 rounded-md ${r}`,role:"alert",children:s.jsx("p",{className:"text-sm",children:e})}):null},4231:(e,r,a)=>{"use strict";a.d(r,{I:()=>n});var s=a(326),t=a(7577);let n=a.n(t)().forwardRef(({label:e,error:r,className:a="",id:t,...n},i)=>{let o=t||`input-${e?.replace(/\s+/g,"-").toLowerCase()}`;return(0,s.jsxs)("div",{className:"w-full",children:[e&&s.jsx("label",{htmlFor:o,className:"block text-sm font-medium text-secondary-700 mb-1",children:e}),s.jsx("input",{ref:i,id:o,className:`input-field ${r?"border-error-500 focus:ring-error-500":""} ${a}`,...n}),r&&s.jsx("p",{className:"mt-1 text-sm text-error-600",role:"alert",children:r})]})});n.displayName="Input"},7254:(e,r,a)=>{"use strict";a.d(r,{Lf:()=>d,dm:()=>o,c5:()=>l,J6:()=>n,gV:()=>i});var s=a(9969);let t={password:{required:"Le mot de passe est requis",minLength:"Le mot de passe doit contenir au moins 8 caract\xe8res",maxLength:"Le mot de passe ne peut pas d\xe9passer 128 caract\xe8res"},user:{usernameRequired:"Le nom d'utilisateur est requis",usernameMin:"Le nom d'utilisateur doit contenir au moins 3 caract\xe8res",usernameMax:"Le nom d'utilisateur ne peut pas d\xe9passer 50 caract\xe8res",usernameFormat:"Le nom d'utilisateur ne peut contenir que des lettres minuscules, chiffres, points, traits d'union et underscores",nameRequired:"Le nom complet est requis",nameMax:"Le nom ne peut pas d\xe9passer 100 caract\xe8res",emailRequired:"Le courriel est requis",emailInvalid:"Adresse courriel invalide",emailMax:"Le courriel ne peut pas d\xe9passer 100 caract\xe8res",roleRequired:"Le r\xf4le est requis",roleInvalid:"R\xf4le invalide. Choisir: Admin, Contr\xf4leur ou Utilisateur",duplicateUsername:e=>`Le nom d'utilisateur "${e}" est d\xe9j\xe0 utilis\xe9. Veuillez en choisir un autre.`,duplicateEmail:e=>`Le courriel "${e}" est d\xe9j\xe0 utilis\xe9. Veuillez en choisir un autre.`},machine:{numeroOLRequired:"Le num\xe9ro #OL est requis",numeroOLMax:"Le num\xe9ro #OL ne peut pas d\xe9passer 50 caract\xe8res",numeroOLFormat:"Le num\xe9ro #OL ne peut contenir que des lettres majuscules, chiffres et tirets",duplicateOL:e=>`Le num\xe9ro #OL "${e}" existe d\xe9j\xe0`,typeRequired:"Le type de machine est requis",typeMax:"Le type ne peut pas d\xe9passer 200 caract\xe8res",clientRequired:"Le client est requis",clientInvalid:"Client invalide"},client:{companyNameRequired:"Le nom de l'entreprise est requis",companyNameMax:"Le nom de l'entreprise ne peut pas d\xe9passer 200 caract\xe8res",addressRequired:"L'adresse est requise",addressMax:"L'adresse ne peut pas d\xe9passer 300 caract\xe8res",provinceRequired:"La province est requise",provinceInvalid:"Province invalide",postalCodeRequired:"Le code postal est requis",postalCodeFormat:"Format de code postal invalide (A1A 1A1 ou A1A1A1)",hasMatches:e=>`Ce client a ${e} machine(s) associ\xe9e(s). Veuillez d'abord supprimer ou r\xe9assigner les machines.`}},n=s.Ryn({username:s.Z_8().min(3,t.user.usernameMin).max(50,t.user.usernameMax).regex(/^[a-z0-9._-]+$/,t.user.usernameFormat),email:s.Z_8().min(1,t.user.emailRequired).email(t.user.emailInvalid).max(100,t.user.emailMax),name:s.Z_8().min(1,t.user.nameRequired).max(100,t.user.nameMax),password:s.Z_8().min(8,t.password.minLength).max(128,t.password.maxLength),role:s.KmV(["Admin","Contr\xf4leur","Utilisateur"],{message:t.user.roleInvalid}),isActive:s.O72().default(!0)}),i=s.Ryn({username:s.Z_8().min(3,t.user.usernameMin).max(50,t.user.usernameMax).regex(/^[a-z0-9._-]+$/,t.user.usernameFormat).optional(),email:s.Z_8().email(t.user.emailInvalid).max(100,t.user.emailMax).optional(),name:s.Z_8().min(1,t.user.nameRequired).max(100,t.user.nameMax).optional(),password:s.Z_8().min(8,t.password.minLength).max(128,t.password.maxLength).optional(),role:s.KmV(["Admin","Contr\xf4leur","Utilisateur"],{message:t.user.roleInvalid}).optional(),isActive:s.O72().optional()}),o=s.Ryn({username:s.Z_8().min(1,"Le nom d'utilisateur ou courriel est requis"),password:s.Z_8().min(1,t.password.required)}),l=s.Ryn({numeroOL:s.Z_8().min(1,t.machine.numeroOLRequired).max(50,t.machine.numeroOLMax).regex(/^[A-Z0-9-]+$/,t.machine.numeroOLFormat),type:s.Z_8().min(1,t.machine.typeRequired).max(200,t.machine.typeMax),clientId:s.Z_8().uuid(t.machine.clientInvalid)});s.Ryn({numeroOL:s.Z_8().min(1,t.machine.numeroOLRequired).max(50,t.machine.numeroOLMax).regex(/^[A-Z0-9-]+$/,t.machine.numeroOLFormat).optional(),type:s.Z_8().min(1,t.machine.typeRequired).max(200,t.machine.typeMax).optional(),clientId:s.Z_8().uuid(t.machine.clientInvalid).optional()});let d=s.Ryn({companyName:s.Z_8().min(1,t.client.companyNameRequired).max(200,t.client.companyNameMax),address:s.Z_8().min(1,t.client.addressRequired).max(300,t.client.addressMax),province:s.KmV(["QC","ON","AB","BC","MB","NB","NL","NT","NS","NU","PE","SK","YT"],{message:t.client.provinceInvalid}),postalCode:s.Z_8().regex(/^[A-Za-z]\d[A-Za-z][ -]?\d[A-Za-z]\d$/,t.client.postalCodeFormat).transform(e=>e.replace(/[ -]/g,"").toUpperCase())});s.Ryn({companyName:s.Z_8().min(1,t.client.companyNameRequired).max(200,t.client.companyNameMax).optional(),address:s.Z_8().min(1,t.client.addressRequired).max(300,t.client.addressMax).optional(),province:s.KmV(["QC","ON","AB","BC","MB","NB","NL","NT","NS","NU","PE","SK","YT"],{message:t.client.provinceInvalid}).optional(),postalCode:s.Z_8().regex(/^[A-Za-z]\d[A-Za-z][ -]?\d[A-Za-z]\d$/,t.client.postalCodeFormat).transform(e=>e.replace(/[ -]/g,"").toUpperCase()).optional()})},7210:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>o});var s=a(9510),t=a(8585),n=a(7371),i=a(1375);async function o({children:e}){let r=await (0,i.Gg)();r||(0,t.redirect)("/login");let a="Admin"===r.role;return"Admin"===r.role||r.role,(0,s.jsxs)("div",{className:"min-h-screen bg-secondary-50",children:[s.jsx("header",{className:"bg-white shadow-sm border-b border-secondary-200",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,s.jsxs)("div",{children:[s.jsx(n.default,{href:"/",className:"text-2xl font-bold text-primary-700 hover:text-primary-800",children:"Huron Portal"}),(0,s.jsxs)("p",{className:"text-sm text-secondary-600",children:["Bienvenue, ",r.username," (",r.role,")"]})]}),s.jsx("form",{action:"/api/auth/logout",method:"POST",children:s.jsx("button",{type:"submit",className:"bg-secondary-200 hover:bg-secondary-300 text-secondary-900 font-medium py-2 px-4 rounded-md transition-colors",children:"D\xe9connexion"})})]}),(0,s.jsxs)("nav",{className:"flex space-x-8 border-t border-secondary-200 pt-4 pb-4",children:[s.jsx(n.default,{href:"/",className:"text-secondary-700 hover:text-primary-600 font-medium transition-colors",children:"Tableau de bord"}),s.jsx(n.default,{href:"/machines",className:"text-secondary-700 hover:text-primary-600 font-medium transition-colors",children:"Machines"}),s.jsx(n.default,{href:"/clients",className:"text-secondary-700 hover:text-primary-600 font-medium transition-colors",children:"Clients"}),a&&s.jsx(n.default,{href:"/users",className:"text-secondary-700 hover:text-primary-600 font-medium transition-colors",children:"Utilisateurs"})]})]})}),s.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e})]})}},1506:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>n,metadata:()=>t});var s=a(9510);a(7272);let t={title:"Huron Portal - Gestion des Machines CNC",description:"Syst\xe8me de gestion des machines CNC pour Huron"};function n({children:e}){return s.jsx("html",{lang:"fr",children:s.jsx("body",{className:"antialiased bg-secondary-50 text-secondary-900",children:e})})}},3008:(e,r,a)=>{"use strict";a.d(r,{O:()=>s});let s=(0,a(8570).createProxy)(String.raw`C:\GIT\HuronPortal\components\forms\ClientForm.tsx#ClientForm`)},1375:(e,r,a)=>{"use strict";a.d(r,{Gg:()=>c,Rf:()=>x,Uj:()=>p,ed:()=>d,v6:()=>u});var s=a(6890),t=a(1463),n=a(1615);let i=new TextEncoder().encode(process.env.SESSION_SECRET||"development-secret-key-change-in-production"),o=Number(process.env.SESSION_DURATION)||3600,l="session";async function d(e,r,a){let t=Math.floor(Date.now()/1e3),n=t+o;return await new s.N({userId:e,username:r,role:a,createdAt:t,expiresAt:n}).setProtectedHeader({alg:"HS256"}).setIssuedAt(t).setExpirationTime(n).sign(i)}async function m(e){try{let{payload:r}=await (0,t._)(e,i),a=Math.floor(Date.now()/1e3);if(r.expiresAt&&"number"==typeof r.expiresAt&&r.expiresAt<a)return null;return r}catch(e){return null}}async function u(e){let r=e.cookies.get(l)?.value;return r?m(r):null}async function c(){let e=await (0,n.cookies)(),r=e.get(l)?.value;return r?m(r):null}function p(e){return{name:l,value:e,httpOnly:!0,secure:!0,sameSite:"lax",maxAge:o,path:"/"}}function x(){return{name:l,value:"",httpOnly:!0,secure:!0,sameSite:"lax",maxAge:0,path:"/"}}},7272:()=>{}};